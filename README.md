# C_simple_mail_deliver

# Простой доставщик сообщений.
Учебный проект, цель которого получить опыт сетевого программирования на уровне сокетов, пересылая дейтаграммы.
В качестве получателя сообщения указывается имя дериктории. Так же можно было бы в качестве получателя сообщений узазывать имена файлов.

# Модуль Socket_lib
Для того чтобы каждый раз с нуля не писать функции для создания, закрытия и других функций для работы с сокетами, была написана программа socket_lib.
Давать подробное описание каждой функции, не имеет смысла, названия функций говорят сами за себя.
Дадим только небольшое пояснение структуре my_socket:
поле sfd - хранит номер дескрипотра, который возвращается функцией creat_socket
поле msg - хранит полученную дейтаграмму

# Модуль deliver_system
Краткое описание модуля.
Получает имя получателя, и после этого приступает к поиску с помощью функции find_recipient(dir_name, recipient_name, is_found, recipient_path); Для нахождения нужного получателя(который есть директория) используются функции opendir, readdir, closedir. В качестве старотовой точки для поиска задана текущая директория. 

# Модуль delivery_server
Описание. В модуле создается сокет для общения с клиентом, после того как был найден нужный пользователь, delivery_system доставляет туда сообщение(в ввиде файла)

# Как запускать программу

make composer - для компиляции файла composer.c
make delivers1 - для компиляции файла delivers1.c

# Что делает файл composer.c
Программа принимает два аргумента коммандной строки. Первый имя получателя, второй сообщение, которое вы хотите отправить. Если сообщение длинное, то сего следует взять в двойные кавычки.
Затем программа создает сокет, инициализирует его. После этого вызывается функция find_recipient(".", *(argv + 1), &is_found, recipient_path), которая ищет получателя. В качестве стартовой точки для поиска, задана текущая директория. Если пользователь, существует, ему доставляется сообщение.

# Пример запуска программы.
Создайте в текущей директории папку с любым названием, в ней создайте папку с именем получателя.
Запустите delivers1 в фоновом режиме. 
./delivers1 &
Запустите composer с двумя аргументами. 
./composer andrey "Hello, andrey"
После завершения в папке andrey появится сообщение "Hello, Andrey"
